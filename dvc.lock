schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/bone_classifier/pipeline/stage_01_dataingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: ad4dda8e169fe1b7073f3221109e261f
      size: 981
    - path: src/bone_classifier/pipeline/stage_01_dataingestion.py
      hash: md5
      md5: fd7f0384d07f4ae3bbde53aa6253dff2
      size: 927
    outs:
    - path: artifacts/dataingestion/BONE
      hash: md5
      md5: 41f513f6726259cfb74e609b4e64b645.dir
      size: 23125047
      nfiles: 660
  prepare_base_model:
    cmd: python src/bone_classifier/pipeline/stage_02_prepare_base_model.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: ad4dda8e169fe1b7073f3221109e261f
      size: 981
    - path: src/bone_classifier/pipeline/stage_02_prepare_base_model.py
      hash: md5
      md5: 5cb0c0dd49fdfe1564fc7252cd04f10f
      size: 925
    params:
      params.yaml:
        CLASSES: 5
        IMAGE_SIZE:
        - 224
        - 224
        - 3
        INCLUDE_TOP: false
        LEARNING_RATE: 0.02
        WEIGHTS: imagenet
    outs:
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 4d8871ffa625522b09e63717ac4ad383.dir
      size: 383670720
      nfiles: 2
  model_training:
    cmd: python src/bone_classifier/pipeline/stage_03_model_training.py
    deps:
    - path: artifacts/dataingestion/BONE
      hash: md5
      md5: 41f513f6726259cfb74e609b4e64b645.dir
      size: 23125047
      nfiles: 660
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 4d8871ffa625522b09e63717ac4ad383.dir
      size: 383670720
      nfiles: 2
    - path: config/config.yaml
      hash: md5
      md5: ad4dda8e169fe1b7073f3221109e261f
      size: 981
    - path: src/bone_classifier/pipeline/stage_03_model_training.py
      hash: md5
      md5: 45f6ed90bcb8b59f435316bd46aad65a
      size: 967
    params:
      params.yaml:
        AUGMENTATION: true
        BATCH_SIZE: 12
        EPOCHS: 1
        IMAGE_SIZE:
        - 224
        - 224
        - 3
    outs:
    - path: artifacts/training/best_model.h5
      hash: md5
      md5: 9d6e735c8cadffe19968184cf39ed813
      size: 710444192
  model_evaluation:
    cmd: python src/bone_classifier/pipeline/stage_04_model_evaluation.py
    deps:
    - path: artifacts/dataingestion/BONE
      hash: md5
      md5: 41f513f6726259cfb74e609b4e64b645.dir
      size: 23125047
      nfiles: 660
    - path: artifacts/training/best_model.h5
      hash: md5
      md5: 9d6e735c8cadffe19968184cf39ed813
      size: 710444192
    - path: config/config.yaml
      hash: md5
      md5: ad4dda8e169fe1b7073f3221109e261f
      size: 981
    - path: src/bone_classifier/pipeline/stage_04_model_evaluation.py
      hash: md5
      md5: 1ade9dafba407c1de0603f9b1243d406
      size: 947
    params:
      params.yaml:
        BATCH_SIZE: 12
        IMAGE_SIZE:
        - 224
        - 224
        - 3
    outs:
    - path: scores.json
      hash: md5
      md5: 4add6f35327dad46cb7b72fc1ce246d5
      size: 69
